function pixelGlass(){"use strict";function t(){e(),c(),"on"===x.state&&f()}function e(){var t=d.documentElement;if(void 0!==d.body.dataset.hasStickyPoint){var e=d.querySelector(".sticky-point");e&&!localStorage["pg-released"]&&(t=e),x.state="off"}p=d.createElement("div"),p.classList.add(y),t.appendChild(p);var o=["top","right","bottom","left"];o.forEach(function(t){var e=s(t,"");e&&(p.style[t]=e)}),a()}function a(){o(_),o(N),n(E),i()}function o(t){var e=(t.listName,t.itemName),a=t.elemTag,o=t.elemText,n=t.type,i=t.list,s=(t.action,x[e]),c=t.attrs,v=i.indexOf(s),g=t.canDisableAll,h=e,A=d.createElement(a);if(A.classList.add(y+"__control",y+"__control--"+n),A.setAttribute("type",n),A.setAttribute("id",h),A.dataset.stateNum=v,c)for(var _ in c)A.setAttribute(_,c[_]);"button"===a&&(A.innerHTML=o),g||b.push(A),p.appendChild(A),A.onclick=function(){t.target&&(v=+!v,s=i[v],A.dataset.stateNum=v,t.target.elem.dataset[e]=s,u(e,s),g&&g===!0&&("off"===s?(m(),l()):(f(),r())))}}function n(t){var e=t.itemName,a=t.attrs,o=t.type,n=t.setAttr,i=t.canDisableAll,l=e,r=d.createElement("input");r.classList.add(y+"__control",y+"__control--"+o),r.setAttribute("type",o),r.setAttribute("id",l);for(var s in a)r.setAttribute(s,a[s]);r.setAttribute("value",x[e]),i||b.push(r),p.appendChild(r),r.oninput=function(){"style"===n&&(t.target.elem.style[e]=this.value,u(e,this.value))}}function i(){var t=d.createElement("button");t.classList.add(y+"__control",y+"__control--drag-n-drop"),t.setAttribute("type","button"),p.appendChild(t),t.onmousedown=function(){var t=(this.offsetTop,p.clientWidth-this.clientWidth),e=getComputedStyle(p);p.style.top=e.top,p.style.left=e.left,p.style.right="auto",p.style.bottom="auto",d.onmousemove=function(e){var a=e.clientX-t+"px",o=e.clientY+"px";p.style.left=a,p.style.top=o}},t.onmouseup=function(){var t=getComputedStyle(p),e=+t.left.replace(/px/,""),a=+t.right.replace(/px/,""),o=+t.top.replace(/px/,""),n=+t.bottom.replace(/px/,"");e>a?(u("left","auto"),u("right",t.right),p.style.right=t.right,p.style.left="auto"):(u("left",t.left),u("right","auto")),o>n?(u("top","auto"),u("bottom",t.bottom),p.style.bottom=t.bottom,p.style.top="auto"):(u("top",t.top),u("bottom","auto")),d.onmousemove=null}}function l(){b.forEach(function(t){t.setAttribute("disabled","")})}function r(){b.forEach(function(t){t.removeAttribute("disabled")})}function s(t,e){var a=[v,t].join("-"),o=localStorage[a];return o?o:e}function u(t,e){var a=[v,t].join("-");localStorage[a]=e}function c(){for(var t in A){var e=A[t],a=x[t];"data"===e.attr&&(e.elem.dataset[t]=a)}"off"===x.state&&l()}function f(){for(var t in A){var e=A[t],a=x[t];"style"===e.attr&&(e.elem.style[t]=a)}}function m(){for(var t in A){var e=A[t];"style"===e.attr&&(e.elem.style[t]="")}}var p,d=document,y="controls-panel",b=[],v="pg",g=["none","invert"],h=["off","on"],x={state:s("state",h[1]),filter:s("filter",g[0]),opacity:s("opacity",.5)},A={state:{elem:d.documentElement,attr:"data"},filter:{elem:d.body,attr:"data"},opacity:{elem:d.body,attr:"style"}},_={elemTag:"button",elemText:"on",listName:"states",itemName:"state",target:A.state,type:"button",list:h,canDisableAll:!0,attrs:{tabindex:1}},N={elemTag:"button",elemText:"invert",listName:"filters",itemName:"filter",target:A.filter,type:"button",list:g,attrs:{tabindex:2}},E={itemName:"opacity",type:"number",target:A.opacity,setAttr:"style",attrs:{min:0,max:1,step:.1,tabindex:3}};t()}window.onload=function(){pixelGlass()};